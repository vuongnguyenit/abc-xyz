var checkout_lng = new Array(); checkout_lng['inprocess_vi-VN'] = 'Vui lòng chờ..'; checkout_lng['inprocess_en-US'] = 'Please waiting..'; checkout_lng['error_missing_vi-VN'] = 'Vui lòng nhập thông tin đầy đủ.'; checkout_lng['error_missing_en-US'] = 'Please fill in the form.'; checkout_lng['error_email_vi-VN'] = 'Email bắt buộc và phải đúng định dạng.'; checkout_lng['error_email_en-US'] = 'Email incorrect format.'; jQuery('input#payment_method2').click(function() { jQuery('div#bankinfo').show('fast'); }); jQuery('span#close').click(function() { jQuery('div#bankinfo').hide('fast'); }); jQuery('input#payment_method1').click(function() { jQuery('div#bankinfo').hide('fast'); }); function lockButton() { jQuery('#order').addClass('disabled'); jQuery('#order').attr('disabled', 'disabled'); } function enableButton() { jQuery('#order').removeClass('disabled'); jQuery('#order').removeAttr('disabled'); } document.frmCheckout.billing_name.focus(); jQuery(function() { var loader = jQuery('<div class="loader">' + checkout_lng['inprocess_' + lang] + '</div>').css({ position: 'fixed', top: '4em', right: '0.9em' }).appendTo('body').hide(); jQuery(document).ajaxStart(function() { loader.fadeIn(100).show(1); lockButton(); jQuery('div#showdata').hide(); }).ajaxStop(function() { loader.animate({ 'opacity': 1.0 }, 500).fadeOut(100).hide(1); enableButton(); }).ajaxError(function(a, b, e) { throw e; }); var container = jQuery('div#showdata'); var v = jQuery('#frmCheckout').validate({ debug: false, errorContainer: container, errorLabelContainer: jQuery('ol', container), meta: 'validate', submitHandler: function(form) { jQuery(form).ajaxSubmit({ resetForm: false, dataType: 'json', success: function(data, status) { if (data.code == 'success' && status == 'success') { document.location.href = REDIRECT_URL; } else if (data.code == 'invalidEmail') { alert(checkout_lng['error_email_' + lang]); jQuery('#billing_email').focus(); } else if (data.code == 'missingData') { alert(checkout_lng['error_missing_' + lang]); } return false; } }); } }); jQuery('#clear').click(function() { v.resetForm(); jQuery('#billing_name').focus(); }); jQuery('input[name=cart]').click(function() { document.location.href = CART_URL; }); jQuery('input[name=return]').click(function() { document.location.href = RETURN_URL; }); });