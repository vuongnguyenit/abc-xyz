var forgotpwd_lng = new Array(); forgotpwd_lng['inprocess_vi-VN'] = 'Vui lòng chờ..'; forgotpwd_lng['inprocess_en-US'] = 'Please waiting..'; forgotpwd_lng['success_vi-VN'] = "Vui lòng kiểm tra email.\nChúng tôi đã gửi đến Bạn một email với thông tin yêu cầu gửi mật khẩu mới."; forgotpwd_lng['success_en-US'] = "Please check your e-mail.\nWe have sent you an email with the information required to submit a new password."; forgotpwd_lng['error_invalid_email_vi-VN'] = 'Địa chỉ email không hợp lệ.'; forgotpwd_lng['error_invalid_email_en-US'] = 'Email is invalided.';forgotpwd_lng['error_email_vi-VN'] = 'Email bắt buộc và phải đúng định dạng.';  forgotpwd_lng['error_email_en-US'] = 'Email incorrect format.'; forgotpwd_lng['error_missing_vi-VN'] = 'Vui lòng nhập thông tin đầy đủ.'; forgotpwd_lng['error_missing_en-US'] = 'Please fill in the form.'; function lockButton(){ jQuery('#send').addClass('disabled'); jQuery('#send').attr('disabled', 'disabled'); } function enableButton() { jQuery('#send').removeClass('disabled'); jQuery('#send').removeAttr('disabled'); } document.frmForgotpwd.email.focus(); jQuery(function(){ jQuery('#refreshimg').live('click', function(event){ event.preventDefault(); jQuery.post('/captcha-new-session'); jQuery('#captchaimage').load('/captcha-require', function(data,status) { if(status == 'success') jQuery('input#captcha').focus(); }); return false; }); }); jQuery(function() { var loader = jQuery('<div class="loader">' + forgotpwd_lng['inprocess_' + lang] + '</div>').css({position: "fixed", top: "4em", right: "0.9em"}).appendTo('body').hide(); jQuery(document).ajaxStart(function() { loader.fadeIn(100).show(1); lockButton(); jQuery('div#showdata').hide(); }).ajaxStop(function() { loader.animate({'opacity': 1.0}, 500).fadeOut(100).hide(1); enableButton(); }).ajaxError(function(a, b, e) { throw e; }); var container = jQuery('div#showdata'); var v = jQuery('#frmForgotpwd').validate({ debug: false, errorContainer: container, errorLabelContainer: jQuery('ol', container), meta: 'validate', submitHandler: function(form) { jQuery(form).ajaxSubmit({ resetForm: false, dataType: 'json', success: function(data,status) { if(data.code == 'success' && status == 'success') { v.resetForm(); alert(forgotpwd_lng['success_' + lang]); document.location.href = SIGNIN_URL; } else if(data.code == 'invalidData') { alert(forgotpwd_lng['error_invalid_' + lang]); jQuery('#email').focus(); } else if(data.code == 'invalidEmail') { alert(forgotpwd_lng['error_email_' + lang]); jQuery('#email').focus(); } else if(data.code == 'missingData') { alert(forgotpwd_lng['error_missing_' + lang]); jQuery('#email').focus(); } return false; } }); } }); });