var contact_lng = new Array(); contact_lng['inprocess_vi-VN'] = 'Vui lòng chờ..'; contact_lng['inprocess_en-US'] = 'Please waiting..'; contact_lng['success_vi-VN'] = 'Mail đã được gửi tới ' + SITE_NAME + '!. Cám ơn Quý khách đã liên hệ, chúng tôi sẽ hồi âm sớm cho Quý khách.'; contact_lng['success_en-US'] = 'Mail was sent to ' + SITE_NAME + '!. Thank you for contact us.'; contact_lng['error_email_vi-VN'] = 'Email bắt buộc và phải đúng định dạng.'; contact_lng['error_email_en-US'] = 'Email incorrect format.'; contact_lng['error_missing_vi-VN'] = 'Vui lòng nhập thông tin đầy đủ.'; contact_lng['error_missing_en-US'] = 'Please fill in the form.'; function lockButton(){ jQuery('#send').addClass('disabled'); jQuery('#send').attr('disabled', 'disabled'); } function enableButton() { jQuery('#send').removeClass('disabled'); jQuery('#send').removeAttr('disabled'); } /*document.contact.name.focus();*/ jQuery(function(){ jQuery('#refreshimg').live('click', function(event){ event.preventDefault(); jQuery.post('/captcha-new-session'); jQuery('#captchaimage').load('/captcha-require', function(data,status) { if(status == 'success') jQuery('input#captcha').focus(); }); return false; }); }); jQuery(function() { var loader = jQuery('<div class="loader">' + contact_lng['inprocess_' + lang] + '</div>').css({position: 'fixed', top: '4em', right: '0.9em'}).appendTo('body').hide(); jQuery(document).ajaxStart(function() { loader.fadeIn(100).show(1); lockButton(); jQuery('div#showdata').hide(); }).ajaxStop(function() { loader.animate({'opacity': 1.0}, 500).fadeOut(100).hide(1); enableButton(); }).ajaxError(function(a, b, e) { throw e; }); var container = jQuery('div#showdata'); var v = jQuery('form#contact').validate({ debug: false, errorContainer: container, errorLabelContainer: jQuery('ol', container), meta: 'validate', submitHandler: function(form) { jQuery(form).ajaxSubmit({ resetForm: false, dataType: 'json', success: function(data, status){ if(data.code == 'success' && status == 'success') { v.resetForm(); alert(contact_lng['success_' + lang]); } else if(data.code == 'invalidEmail') { alert(contact_lng['error_email_' + lang]); jQuery('#email').focus(); } else if(data.code == 'missingData') { alert(contact_lng['error_missing_' + lang]); jQuery('#name').focus(); } v.resetForm(); return false; } }); } }); jQuery('#clear').click(function() { v.resetForm(); jQuery('#name').focus(); }) });