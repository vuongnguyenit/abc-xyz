var signin_lng = new Array(); signin_lng['inprocess_vi-VN'] = 'Vui lòng chờ..'; signin_lng['inprocess_en-US'] = 'Please waiting..'; signin_lng['error_none_activate_vi-VN'] = 'Vui lòng kiểm tra email để kích hoạt tài khoản trước khi tiến hành đăng nhập.'; signin_lng['error_none_activate_en-US'] = 'Please check your email to activate your account before logging.'; signin_lng['error_locked_account_vi-VN'] = "Tài khoản của Quý khách hiện đang tạm khóa.\nVui lòng liên hệ Quản trị viên để biết thêm thông tin."; signin_lng['error_locked_account_en-US'] = "You account is temporarily locked.\nPlease contact administrator for more information."; signin_lng['error_invalid_data_vi-VN'] = 'Địa chỉ Email hoặc Mật khẩu không chính xác.'; signin_lng['error_invalid_data_en-US'] = 'Email or password is incorrect.'; signin_lng['error_invalid_email_vi-VN'] = 'Địa chỉ email không hợp lệ.'; signin_lng['error_invalid_email_en-US'] = 'Email is invalided.'; signin_lng['error_missing_vi-VN'] = 'Vui lòng nhập thông tin đầy đủ.'; signin_lng['error_missing_en-US'] = 'Please fill in the form.'; function lockButton() { jQuery('#login').addClass('disabled'); jQuery('#login').attr('disabled', 'disabled'); } function enableButton() { jQuery('#login').removeClass('disabled'); jQuery('#login').removeAttr('disabled'); } document.frmSignin.email.focus(); jQuery(function() { var loader = jQuery('<div class="loader">' + signin_lng['inprocess_' + lang] + '</div>').css({position: 'fixed', top: '4em', right: '0.9em'}).appendTo('body').hide(); jQuery(document).ajaxStart(function() { loader.fadeIn(100).show(1); lockButton(); jQuery('div#showdata').hide(); }).ajaxStop(function() { loader.animate({'opacity': 1.0}, 500).fadeOut(100).hide(1); enableButton(); }).ajaxError(function(a, b, e) { throw e; }); var container = jQuery('div#showdata'); var v = jQuery('#frmSignin').validate({ debug: false, errorContainer: container, errorLabelContainer: jQuery('ol', container), meta: 'validate', submitHandler: function(form) { jQuery(form).ajaxSubmit({ resetForm: false, dataType: 'json', success: function(data,status) { if(data.code == 'success' && status == 'success') { v.resetForm(); document.location.href = REDIRECT_URL; } else if(data.code == 'noneActivate') { alert(signin_lng['error_none_activate_' + lang]); jQuery('#email').focus(); } else if(data.code == 'lockedAccount') { alert(signin_lng['error_locked_account_' + lang]); jQuery('#email').focus(); } else if(data.code == 'invalidData' || data.code == 'fail') { alert(signin_lng['error_invalid_data_' + lang]); jQuery('#email').focus(); } else if(data.code == 'invalidEmail') { alert(signin_lng['error_invalid_email_' + lang]); jQuery('#email').focus(); }	else if(data.code == 'missingData') { alert(signin_lng['error_missing_' + lang]); jQuery('#name').focus(); } return false; } }); } }) });